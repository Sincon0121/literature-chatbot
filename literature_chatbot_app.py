import streamlit as st

# ğŸ”¹ ì‚¬ìš©ì ì…ë ¥ íŒŒì‹± í•¨ìˆ˜
def parse_input(text):
    data = {}
    lines = text.strip().split("\n")
    for line in lines:
        if ":" in line:
            key, value = line.split(":", 1)
            data[key.strip()] = value.strip()
    return data

# ğŸ”¹ ì‘í’ˆ ë¶„ì„ ì¶œë ¥ í•¨ìˆ˜
def analyze_work(data):
    return f"""
ğŸ“– ì‘í’ˆ ë¶„ì„ ê²°ê³¼

- ì œëª©: {data.get('ì œëª©')}
- ì‘ê°€: {data.get('ì‘ê°€')}
- ë“±ì¥ì¸ë¬¼: {data.get('ë“±ì¥ì¸ë¬¼')}
- ì‘í’ˆ ìƒí™©: {data.get('ìƒí™©')}
- ì •ì„œ ë° í‘œí˜„ê¸°ë²•: {data.get('ì •ì„œ ë° í‘œí˜„ê¸°ë²•')}

ğŸ“ ì´ ì‘í’ˆì€ '{data.get('ì •ì„œ ë° í‘œí˜„ê¸°ë²•')}'ì„ í†µí•´ '{data.get('ìƒí™©')}'ì„ ì¸ìƒì ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
"""

# ğŸ”¹ ì¶”ì²œ ì‘í’ˆ í•¨ìˆ˜
def recommend_next_work(expression_style):
    themes = {
        "ì„œì •ì ": ["ì†Œë‚˜ê¸° - í™©ìˆœì›", "ì—„ë§ˆì˜ ë§ëš - ë°•ì™„ì„œ"],
        "í’ìì ": ["ë‚ ê°œ - ì´ìƒ", "ìš´ìˆ˜ ì¢‹ì€ ë‚  - í˜„ì§„ê±´"],
        "í–¥í† ì ": ["ë™ë°±ê½ƒ - ê¹€ìœ ì •", "ë´„ë´„ - ê¹€ìœ ì •"],
        "ì—­ì‚¬ì  ë¹„ê·¹": ["ì¥ë§ˆ - ìœ¤í¥ê¸¸", "ì‚¼í¬ ê°€ëŠ” ê¸¸ - í™©ì„ì˜"],
        "ìì—° ë¬˜ì‚¬": ["ë©”ë°€ê½ƒ í•„ ë¬´ë µ - ì´íš¨ì„", "ì‚°ê³¨ ì•„ì´ - ì´ì²­ì¤€"]
    }

    for keyword, works in themes.items():
        if keyword in expression_style:
            return f"ğŸ“š ì¶”ì²œ ì‘í’ˆ: {works[0]}"
    return "ğŸ“š ì¶”ì²œ ì‘í’ˆ: ìš´ìˆ˜ ì¢‹ì€ ë‚  - í˜„ì§„ê±´ (ê¸°ë³¸ ì¶”ì²œ)"

# ğŸ”¹ Streamlit ì•± UI
st.title("ğŸ“š ë¬¸í•™ ì‘í’ˆ ë¶„ì„ & ì¶”ì²œ ì±—ë´‡")

st.markdown(
    '''ì‘í’ˆ ì •ë³´ë¥¼ ì•„ë˜ í˜•ì‹ì— ë§ê²Œ ì…ë ¥í•˜ì„¸ìš”:

ì œëª©: ë©”ë°€ê½ƒ í•„ ë¬´ë µ  
ì‘ê°€: ì´íš¨ì„  
ë“±ì¥ì¸ë¬¼: í—ˆìƒì›, ë™ì´, ì¡°ì„ ë‹¬  
ìƒí™©: í—ˆìƒì›ì´ ì¥í„°ì—ì„œ ë§Œë‚œ ë™ì´ì™€ì˜ ëŒ€í™” ì†ì—ì„œ ê³¼ê±°ë¥¼ íšŒìƒí•˜ê³ , ê²°êµ­ ë™ì´ì™€ íŠ¹ë³„í•œ ê´€ê³„ì„ì„ ì•”ì‹œ  
ì •ì„œ ë° í‘œí˜„ê¸°ë²•: í–¥í† ì  ì •ì„œ, ì„œì •ì  ë¬¸ì²´, ìì—° ë¬˜ì‚¬  
'''
)

# ğŸ”¹ ì‚¬ìš©ì ì…ë ¥
user_input = st.text_area("ì‘í’ˆ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:", height=250)

# ğŸ”¹ ë¶„ì„ ë²„íŠ¼
if st.button("ë¶„ì„ ë° ì¶”ì²œí•˜ê¸°"):
    if user_input.strip() == "":
        st.warning("âš ï¸ ì‘í’ˆ ì •ë³´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.")
    else:
        data = parse_input(user_input)
        st.markdown(analyze_work(data))
        st.success(recommend_next_work(data.get("ì •ì„œ ë° í‘œí˜„ê¸°ë²•", "")))